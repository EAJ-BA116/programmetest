<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Programme EAJ â€“ BA 116</title>

  <!-- Couleur navigateur -->
  <meta name="theme-color" content="#0053a6">

  <!-- PWA Android -->
  <link rel="manifest" href="manifest.json">

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="EAJ 116">
  <link rel="apple-touch-icon" href="images/logo_eaj192.png">

  <!-- IcÃ´nes Android -->
  <link rel="icon" type="image/png" sizes="192x192" href="images/logo_eaj192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="images/logo_eaj512.png">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="images/eaj.ico">

  <link id="main-style" rel="stylesheet" href="style.css">
</head>

<body data-theme="dark">
  <!-- âš ï¸ BanniÃ¨res dâ€™alerte -->
  <div id="alert-banner"></div>

  <header class="app-header">
    <div class="header-left">
      <img class="app-logo" src="images/logo_eaj.png" alt="Logo Escadrilles Air Jeunesse">
      <div class="site-title-text">
        <h1>Escadrilles Air Jeunesse</h1>
        <p>BA 116 â€“ Programme des activitÃ©s</p>
        <div class="badge-time">â± Mercredi aprÃ¨s-midi â€¢ 14hâ€“17h (et Ã©vÃ©nements ponctuels)</div>
      </div>
    </div>

    <button id="menu-toggle" class="btn-menu" type="button" aria-label="Ouvrir le menu" aria-controls="app-menu" aria-expanded="false">
      â˜°
    </button>
  </header>

  <!-- Barre filtres + options -->
  <div id="filter-bar" role="navigation" aria-label="Filtres">
    <div id="filter-buttons">
      <button class="btn-filter" data-filter="all">Tous</button>
      <button class="btn-filter" data-filter="EAJ1">EAJ1</button>
      <button class="btn-filter" data-filter="EAJ2">EAJ2</button>
      <button class="btn-filter" data-filter="EAJ3">EAJ3</button>
    </div>

    <div class="filter-actions">
      <label class="toggle-banners" title="Masquer/afficher les banniÃ¨res (non mÃ©morisÃ©)">
        <input type="checkbox" id="banner-toggle" checked>
        <span>Afficher banniÃ¨res</span>
      </label>

      <button id="theme-toggle" class="btn-theme" type="button">ğŸŒ™ Mode sombre</button>
    </div>
  </div>

  <!-- ğŸ¨ LÃ©gende (dÃ©pliable, fermÃ©e par dÃ©faut) -->
  <details class="legend-details" id="legend">
    <summary>ğŸ¨ LÃ©gende des activitÃ©s</summary>
    <div class="legend-line">
      ğŸ“˜ BIA &nbsp;â€¢&nbsp;
      ğŸƒâ€â™‚ï¸ Sport &nbsp;â€¢&nbsp;
      ğŸ›ï¸ Visite &nbsp;â€¢&nbsp;
      ğŸ› ï¸ Projet &nbsp;â€¢&nbsp;
      âœˆï¸ AÃ©romodÃ©lisme &nbsp;â€¢&nbsp;
      ğŸ›¸ Drone &nbsp;â€¢&nbsp;
      ğŸ¯ Tir &nbsp;â€¢&nbsp;
      ğŸ¤ Rencontres &nbsp;â€¢&nbsp;
      ğŸ•¯ï¸ Devoir de mÃ©moire &nbsp;â€¢&nbsp;
      ğŸ–ï¸ CÃ©rÃ©monie &nbsp;â€¢&nbsp;
      âœ¨ Autres
    </div>
  </details>

  <main class="container">
    <!-- ğŸ§­ Section projets (navigation depuis le menu) -->
    <section id="projects" class="projects-section" aria-label="Nos projets">
      <h2>Nos projets</h2>
      <div class="projects-grid">
        <a class="project-card" href="https://eaj-ba116.github.io/HenriFertet2025/" target="_blank" rel="noopener noreferrer">
          <div class="project-title">2025 â€“ Henri Fertet</div>
          <div class="project-desc">Site projet â€¢ ouverture dans un nouvel onglet</div>
        </a>
        <a class="project-card" href="https://eaj-ba116.github.io/operationsagittaire/" target="_blank" rel="noopener noreferrer">
          <div class="project-title">2025 â€“ OpÃ©ration Sagittaire</div>
          <div class="project-desc">Site projet â€¢ ouverture dans un nouvel onglet</div>
        </a>
      </div>
    </section>

    <div id="week-container"></div>
  </main>

  <!-- âœ… Bas de page -->
  <footer>
    <div class="footer-line">EAJ BA 116 â€“ 2025</div>
    <div class="footer-line" id="last-update"></div>
    <div class="footer-line footer-version">Version 1.2.0 du 25/01/2026 â€¢ CodÃ© par Yoann</div>
    <div class="footer-line">
      <a href="#" id="admin-link" class="footer-link footer-link-admin">ğŸ”§ AccÃ¨s administration</a>
    </div>
  </footer>

  <!-- ğŸ” FenÃªtre modale code admin -->
  <div id="admin-modal" class="admin-modal" aria-hidden="true">
    <div class="admin-modal-backdrop"></div>
    <div class="admin-modal-dialog">
      <h2>AccÃ¨s administrateur</h2>
      <p class="admin-modal-text">
        Cette zone est rÃ©servÃ©e aux encadrants EAJ.<br>
        Merci de saisir le code dâ€™accÃ¨s.
      </p>
      <input type="password" id="admin-code-input" placeholder="Code dâ€™accÃ¨s" />
      <div class="admin-modal-actions">
        <button type="button" id="admin-cancel" class="btn-admin btn-admin-secondary">Annuler</button>
        <button type="button" id="admin-validate" class="btn-admin btn-admin-primary">Valider</button>
      </div>
      <p class="admin-error" id="admin-error" style="display:none;">Code incorrect. Merci de vÃ©rifier.</p>
    </div>
  </div>

  <!-- âœˆï¸ Retour en haut -->
  <button id="back-to-top" class="back-to-top air-patch" type="button" aria-label="Retour en haut">âœˆï¸</button>

  <!-- ğŸ” Menu -->
  <div id="app-menu" class="app-menu" aria-hidden="true">
    <div class="app-menu-backdrop" data-menu-close></div>
    <aside class="app-menu-panel" role="dialog" aria-modal="true" aria-label="Menu">
      <div class="app-menu-header">
        <div class="app-menu-title">Menu</div>
        <button class="app-menu-close" type="button" data-menu-close aria-label="Fermer le menu">âœ•</button>
      </div>

      <nav class="app-menu-nav">
        <button class="menu-item" type="button" data-action="scroll-projects">ğŸ“ Nos projets</button>
        <button class="menu-item" type="button" data-action="open-about">â„¹ï¸ Version & changelog</button>
        <button class="menu-item" type="button" data-action="open-admin">ğŸ”§ AccÃ¨s admin</button>
        <button class="menu-item" type="button" data-action="open-contact">âœ‰ï¸ Signaler un bug / Contact</button>
      </nav>

      <div class="app-menu-footer">
        <div class="muted">Version 1.2.0 â€¢ 25/01/2026</div>
      </div>
    </aside>
  </div>

  <!-- â„¹ï¸ Modal Ã€ propos / Changelog -->
  <div id="about-modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-modal-close="about-modal"></div>
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-label="Version et changelog">
      <div class="modal-header">
        <h2>Version & changelog</h2>
        <button class="modal-close" type="button" data-modal-close="about-modal" aria-label="Fermer">âœ•</button>
      </div>

      <div class="modal-body">
        <p class="modal-meta"><strong>Programme EAJ â€“ BA 116</strong><br>Version <strong>1.2.0</strong> â€¢ 25/01/2026 â€¢ CodÃ© par <strong>Yoann</strong></p>

        <div class="changelog">
          <div class="changelog-title">DerniÃ¨res modifications</div>
          <ul>
            <li>Nouveau header + menu hamburger (navigation plus claire)</li>
            <li>Section â€œNos projetsâ€ (au lieu du menu dÃ©roulant)</li>
            <li>Correctifs : retour haut + accÃ¨s admin</li>
            <li>LÃ©gende dÃ©pliable (fermÃ©e par dÃ©faut)</li>
            <li>BanniÃ¨res programmables (dates dÃ©but/fin)</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- âœ‰ï¸ Modal contact -->
  <div id="contact-modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-modal-close="contact-modal"></div>
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-label="Contact">
      <div class="modal-header">
        <h2>Signaler un bug / Contact</h2>
        <button class="modal-close" type="button" data-modal-close="contact-modal" aria-label="Fermer">âœ•</button>
      </div>

      <div class="modal-body">
        <p class="modal-meta">DÃ©cris le souci, puis copie le message (Ã  coller dans ton canal habituel).</p>

        <label class="modal-field">
          <span>Message</span>
          <textarea id="contact-message" rows="6" placeholder="Ex: Sur mobile, le filtre EAJ2 ne masque pas les activitÃ©s communesâ€¦"></textarea>
        </label>

        <div class="modal-actions">
          <button id="copy-contact" class="btn-primary" type="button">Copier le message</button>
          <button class="btn-secondary" type="button" data-modal-close="contact-modal">Fermer</button>
        </div>

        <p class="modal-hint" id="copy-hint" aria-live="polite"></p>
      </div>
    </div>
  </div>

  <!-- âš™ï¸ JS : dâ€™abord planning.js (avec version), puis la logique -->
  <script src="version-loader.js"></script>
</body>
</html>
